<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="head :: head(title = 'プロジェクト一覧',scripts = ~{}, links = ~{})">
</head>
<body>
<!--    ヘッダーの呼び出し-->
    <div th:replace="header :: header"></div>
    <h2>プロジェクト管理</h2>
    <div class="not_project_table">
        <h3>未着手のプロジェクト</h3>
    <table>
        <thead>
            <tr>
                <th>登録日時</th>
                <th>顧客名</th>
                <th>商品名</th>
                <th>担当スタッフ</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        <tr th:each=" no : ${no}">
            <td th:text="${no.receptionDate}"></td>
            <td th:text="${no.Client.name}"></td>
            <td th:text="${item.get(no.itemCategory)}"></td>
            <td th:text="${manager.get(no.manager)}"></td>
            <td>
                <button th:value="${no.id}" id="edit_button" data-bs-toggle="modal" data-bs-target="#projectEdit"type="button" class="btn btn-primary">
                    編集
                </button>
            </td>
        </tr>
        </tbody>
    </table>
    </div>
    <div class="now_project_table">
        <h3>進行中のプロジェクト</h3>
        <table>
            <thead>
            <tr>
                <th>登録日時</th>
                <th>顧客名</th>
                <th>商品名</th>
                <th>担当スタッフ</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each=" ing : ${ing}">
                <td th:text="${ing.receptionDate}"></td>
                <td th:text="${ing.Client.name}"></td>
                <td th:text="${item.get(ing.itemCategory)}"></td>
                <td th:text="${manager.get(ing.manager)}"></td>
                <td>
                    <button th:value="${ing.id}" id="ing_button" data-bs-toggle="modal" data-bs-target="#projectEdit"type="button" class="btn btn-primary">
                        編集
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="end_project_table">
        <h3>完了したプロジェクト</h3>
        <table>
            <thead>
            <tr>
                <th>登録日時</th>
                <th>顧客名</th>
                <th>商品名</th>
                <th>担当スタッフ</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each=" end : ${end}">
                <td th:text="${end.receptionDate}"></td>
                <td th:text="${end.Client.name}"></td>
                <td th:text="${item.get(end.itemCategory)}"></td>
                <td th:text="${manager.get(end.manager)}"></td>
                <td>
                    <button th:value="${end.id}" id="end_button" data-bs-toggle="modal" data-bs-target="#projectEditEnd" type="button" class="btn btn-primary">
                        編集
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

<div class="modal fade" id="projectEdit" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="ModalLabel">Modal title</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/project/progress}">
                    <div class="client_name">
                        <p id="name"></p>
                        <input type="hidden" name="id" id="id">
                    </div>
                    <div class="item">
                        <label>商品名</label>
                        <select name="item" id="item">
                            <option th:each="item : ${item}" th:value="${item.key}" th:text="${item.value}" selected></option>
                        </select>
                    </div>
                    <div class="quantity">
                        <label>数量</label>
                        <input type="text" name="quantity" id="quantity">
                    </div>
                    <div class="amount">
                        <label>金額</label>
                        <input type="text" name="amount" id="amount">
                    </div>
                    <div class="manager">
                        <label>担当者</label>
                        <select name="manager" id="manager">
                            <option th:each="manager : ${manager}" th:value="${manager.key}"
                                    th:text="${manager.value}" selected></option>
                        </select>
                    </div>
                    <div class="progress">
                        <label>状況</label>
                        <select name="progress" id="progress">
                            <option th:each="progress : ${progress}" th:value="${progress.key}"
                                    th:text="${progress.value}" selected></option>
                        </select>
                    </div>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                    <input type="submit" class="btn btn-primary" value="決定">
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="projectEditEnd" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/project/check}">
                    <input type="hidden" name="id" id="endId">
                    <label>進行状況</label>
                    <select name="progress" id="endProgress">
                        <option th:each="progress : ${progress}" th:value="${progress.key}"
                                th:text="${progress.value}" selected></option>
                    </select>
                    <label>納品済み</label>
                    <input type="checkbox" name="endCheck" id="endCheck" value="true">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                        <input type="submit" class="btn btn-primary" value="決定">
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<script type="text/javascript" th:src="@{/js/index.js}"></script>
</body>
</html>